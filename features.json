[
  {
    "category": "functional",
    "description": "setup-claude composite action installs Claude CLI and configures authentication",
    "plan_ref": "Task 1 - Create Composite Action - setup-claude",
    "steps": [
      "Step 1: Create .github/actions/setup-claude/action.yml file",
      "Step 2: Verify action.yml has 'using: composite' in runs section",
      "Step 3: Verify action accepts claude_code_oauth_token and anthropic_api_key inputs",
      "Step 4: Verify action has validation step for auth method",
      "Step 5: Verify action installs Claude CLI from https://claude.ai/install.sh",
      "Step 6: Verify action adds $HOME/.local/bin to GITHUB_PATH"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "fetch-agents composite action downloads all 4 agents from central repository",
    "plan_ref": "Task 2 - Create Composite Action - fetch-agents",
    "steps": [
      "Step 1: Create .github/actions/fetch-agents/action.yml file",
      "Step 2: Verify action has repo input with default 'mkrueger12/claude-parallel'",
      "Step 3: Verify action has ref input with default 'main'",
      "Step 4: Verify action downloads all 4 agents: codebase-analyzer, codebase-locator, coding-agent, debug-agent",
      "Step 5: Verify agents are downloaded to $HOME/.claude/agents directory"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "get-issue-details composite action extracts issue information for both event types",
    "plan_ref": "Task 3 - Create Composite Action - get-issue-details",
    "steps": [
      "Step 1: Create .github/actions/get-issue-details/action.yml file",
      "Step 2: Verify action accepts issue_number input (optional)",
      "Step 3: Verify action accepts github_token input (required)",
      "Step 4: Verify action outputs number, title, and body_file",
      "Step 5: Verify action handles both issues event and workflow_dispatch"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "detect-runtime composite action identifies project language and tooling",
    "plan_ref": "Task 4 - Create Composite Action - detect-runtime",
    "steps": [
      "Step 1: Create .github/actions/detect-runtime/action.yml file",
      "Step 2: Verify action outputs runtime (js, python, go, rust, unknown)",
      "Step 3: Verify action outputs package_manager",
      "Step 4: Verify action outputs has_build and has_tests booleans",
      "Step 5: Verify detection logic for JS (bun, pnpm, yarn, npm)"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "reusable-implement-issue.yml workflow accepts workflow_call trigger with proper inputs",
    "plan_ref": "Task 5 - Create Reusable Workflow",
    "steps": [
      "Step 1: Create .github/workflows/reusable-implement-issue.yml file",
      "Step 2: Verify workflow has workflow_call trigger",
      "Step 3: Verify all inputs are defined: issue_number, num_implementations, claude_model, prompts_repo, prompts_ref, bot_name, bot_email, dry_run",
      "Step 4: Verify secrets are declared: CLAUDE_CODE_OAUTH_TOKEN, ANTHROPIC_API_KEY, GH_PAT",
      "Step 5: Verify workflow has generate-matrix job for dynamic matrix",
      "Step 6: Verify workflow has implement, review, and verify jobs"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "reusable workflow uses composite actions instead of repeated code",
    "plan_ref": "Task 5 - Create Reusable Workflow",
    "steps": [
      "Step 1: Verify reusable workflow uses setup-claude action in all 3 jobs",
      "Step 2: Verify reusable workflow uses fetch-agents action in all 3 jobs",
      "Step 3: Verify reusable workflow uses get-issue-details action appropriately",
      "Step 4: Verify reusable workflow uses detect-runtime action"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "Dynamic matrix generation supports configurable num_implementations",
    "plan_ref": "Task 5 - Create Reusable Workflow",
    "steps": [
      "Step 1: Verify generate-matrix job exists in reusable workflow",
      "Step 2: Verify generate-matrix outputs a JSON array based on num_implementations input",
      "Step 3: Verify implement job uses fromJSON() to consume matrix",
      "Step 4: Verify matrix is correctly sized (1 to N implementations)"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "Dual authentication support works with both OAuth and API key",
    "plan_ref": "Task 5 - Create Reusable Workflow",
    "steps": [
      "Step 1: Verify setup-claude action handles CLAUDE_CODE_OAUTH_TOKEN",
      "Step 2: Verify setup-claude action handles ANTHROPIC_API_KEY as fallback",
      "Step 3: Verify workflow fails with clear error if neither secret is provided",
      "Step 4: Verify OAuth token takes precedence when both are provided"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "Original workflow is updated to call reusable workflow (dogfooding)",
    "plan_ref": "Task 6 - Update Original Workflow",
    "steps": [
      "Step 1: Verify claude-implement-issue.yml uses the reusable workflow",
      "Step 2: Verify original triggers (workflow_dispatch) are preserved",
      "Step 3: Verify original inputs (issue_number, dry_run) are passed through",
      "Step 4: Verify secrets are passed to reusable workflow",
      "Step 5: Verify file is significantly smaller (~30 lines vs ~771)"
    ],
    "passes": true
  },
  {
    "category": "functional",
    "description": "Consumer can use reusable workflow with ~15 lines of YAML",
    "plan_ref": "Task 5 - Create Reusable Workflow",
    "steps": [
      "Step 1: Verify minimal consumer workflow example works",
      "Step 2: Verify only CLAUDE_CODE_OAUTH_TOKEN OR ANTHROPIC_API_KEY is required",
      "Step 3: Verify GH_PAT secret is required for PR creation",
      "Step 4: Verify default values work correctly without explicit configuration"
    ],
    "passes": true
  }
]
